1,"SELECT os.stop_id, os.stop_name, r.route_id, r.route_short_name, r.route_long_name, t.trip_id AS trip_id, t.trip_headsign AS trip_headsign, t.direction_id, (ost.departure_time_hour*#+ost.departure_time_minute  - $#)  AS departure_time_relative, h.distance(os.stop_lat, os.stop_lon, $#,$#) AS distance_to_stop, ost.estimate_source AS estimate_source,  CASE ost.fullness IS NULL WHEN true THEN # ELSE ost.fullness END FROM m.stop os, m.route r, m.trip t, m.stop_time ost, m.calendar c WHERE os.stop_id IN (SELECT s.stop_id AS stop_id FROM m.stop s  WHERE s.stop_lat BETWEEN ($#-$#) AND ($#+$#)  AND s.agency_id = $#  AND s.stop_lon BETWEEN ($#-$#) AND ($#+$#) ORDER BY h.distance(s.stop_lat, s.stop_lon, $#,$#) LIMIT #) AND os.agency_id = $#  AND r.agency_id = os.agency_id  AND t.agency_id = os.agency_id  AND ost.agency_id = os.agency_id  AND c.agency_id = os.agency_id  AND os.stop_id = ost.stop_id  AND t.trip_id = ost.trip_id  AND r.route_id = t.route_id  AND (ost.departure_time_hour*#*# + ost.departure_time_minute*#) >= $#  AND (ost.departure_time_hour*#*# + ost.departure_time_minute*#) <= $#  AND c.thursday = #  AND c.end_date >= CURRENT_DATE  AND c.start_date <= CURRENT_DATE  AND c.service_id = t.service_id  UNION SELECT os.stop_id, os.stop_name, r.route_id, r.route_short_name, r.route_long_name, t.trip_id AS trip_id, t.trip_headsign AS trip_headsign, t.direction_id, (ost.departure_time_hour*#+ost.departure_time_minute  - $#)  AS departure_time_relative, h.distance(os.stop_lat, os.stop_lon, $#,$#) AS distance_to_stop, ost.estimate_source AS estimate_source,  CASE ost.fullness IS NULL WHEN true THEN # ELSE ost.fullness END FROM m.stop os, m.route r, m.trip t, m.stop_time ost, m.calendar_date cd  WHERE os.stop_id IN (SELECT s.stop_id AS stop_id FROM m.stop s  WHERE s.stop_lat BETWEEN ($#-$#) AND ($#+$#)  AND s.agency_id = $#  AND s.stop_lon BETWEEN ($#-$#) AND ($#+$#) ORDER BY h.distance(s.stop_lat, s.stop_lon, $#,$#) LIMIT #) AND os.agency_id = $#  AND r.agency_id = os.agency_id  AND t.agency_id = os.agency_id  AND ost.agency_id = os.agency_id  AND cd.agency_id = os.agency_id  AND os.stop_id = ost.stop_id  AND t.trip_id = ost.trip_id  AND r.route_id = t.route_id  AND (ost.departure_time_hour*#*# + ost.departure_time_minute*#) >= $#  AND (ost.departure_time_hour*#*# + ost.departure_time_minute*#) <= $#  AND t.service_id = cd.service_id  AND cd.exception_date = $#  AND cd.exception_type = #  )  EXCEPT SELECT os.stop_id, os.stop_name, r.route_id, r.route_short_name, r.route_long_name, t.trip_id AS trip_id, t.trip_headsign AS trip_headsign, t.direction_id, (ost.departure_time_hour*#+ost.departure_time_minute  - $#)  AS departure_time_relative, h.distance(os.stop_lat, os.stop_lon, $#,$#) AS distance_to_stop, ost.estimate_source AS estimate_source,  CASE ost.fullness IS NULL WHEN true THEN # ELSE ost.fullness END FROM m.stop os, m.route r, m.trip t, m.stop_time ost, m.calendar_date cd WHERE os.stop_id IN (SELECT s.stop_id AS stop_id FROM m.stop s  WHERE s.stop_lat BETWEEN ($#-$#) AND ($#+$#)  AND s.agency_id = $#  AND s.stop_lon BETWEEN ($#-$#) AND ($#+$#) ORDER BY h.distance(s.stop_lat, s.stop_lon, $#,$#) LIMIT #) AND os.agency_id = $#  AND r.agency_id = os.agency_id  AND t.agency_id = os.agency_id  AND ost.agency_id = os.agency_id  AND cd.agency_id = os.agency_id  AND os.stop_id = ost.stop_id  AND t.trip_id = ost.trip_id  AND r.route_id = t.route_id  AND t.service_id = cd.service_id  AND cd.exception_date = $#  AND cd.exception_type = # )SELECT t1.stop_id, t1.stop_name, t1.route_id, t1.route_short_name, t1.route_long_name,t1.direction_id, t1.trip_id, t1.trip_headsign, floor(t1.departure_time_relative) as departure_time_relative, t1.distance_to_stop, t1.estimate_source, t1.fullness FROM t1 ORDER BY t1.distance_to_stop,t1.route_short_name, t1.departure_time_relative"
2016-12-15 03:45:00,1
